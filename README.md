# 古着商品管理アプリ（MVP）

Googleスプレッドシートを正とした古着商品管理アプリです。  
Streamlit画面から「登録 -> 一覧 -> 編集」を行い、シートに保存します。

## セットアップ

1. Python 3.11+ を用意
2. 依存関係をインストール

```bash
pip install -r requirements.txt
```

3. サービスアカウント認証情報JSONを用意
4. 環境変数を設定（JSONの実ファイルパス）

```bash
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account.json"
```

## 対象スプレッドシート要件

- シート名: `商品管理シート`
- ヘッダー行: 3行目
- 利用列（日本語ヘッダー）:
  - `商品No`
  - `商品名`
  - `店舗名`
  - `仕入れ日付`
  - `仕入額`
  - `出品済`
  - `出品日`
  - `売却日`
  - `売上金`
  - `販売先`

※ ヘッダー内の改行（例: `商品\nNo`）は内部で吸収します。

## 起動方法

```bash
streamlit run app.py
```

## 現在の実装範囲

- 商品登録フォーム
  - 必須バリデーション（商品名 / 店舗名 / 仕入日 / 仕入額）
  - 出品日・販売先の任意入力
- 商品一覧
  - 件数表示
  - 検索（商品No / 商品名 / 店舗名 / 販売先）
  - フィルタ（販売状態 / 店舗名 / 販売先 / 重要度）
  - 並び替え（仕入日 / 仕入額 / 状態 / 商品No）
- 商品編集（最低限）
  - 更新時の外部更新検知（`revision` 相当）
  - 出品日 / 販売日のカレンダー入力
  - 販売先プルダウン（`手数料リスト` 連携）

## テスト

```bash
pytest -q
```

実行結果（現時点）: `3 passed`

