# 古着商品管理アプリ 要件定義書（MVP）

## 1. 背景・課題（Why）

小規模店舗では、売上・在庫・仕入れ管理をGoogleスプレッドシートで行っている。  
入力ルールは整っており、誰でも記録できる状態にある。

しかし、以下の課題がある。

- 欲しい情報を探すのに時間がかかる
- 複数シートや列を横断して確認する必要がある
- 集計や分析のためにフィルタや関数操作が必要
- 現場やスマホでは見づらい
- データはあるのに、瞬時に判断できない

問題は「管理できていない」ことではない。  
問題は「見えづらい」こと。

本プロジェクトの目的は、既存データを活かしながら“見え方”を変え、  
判断速度と業務効率を向上させることである。

## 2. ゴール（成果物の定義）

### 前提方針

- 既存Googleスプレッドシートをバックエンド（正）とする
- データ構造は基本的に変更しない
- 商品登録・編集・集計はWebアプリ上で完結させる

### 成果ゴール

- 商品の登録・編集・管理をアプリ上で行える
- スプレッドシートへ正しく反映される
- 一覧画面で商品状態（未出品・出品済・売却済など）を俯瞰できる
- 期間指定により売上・利益などの集計が確認できる
- 外部更新があった場合に保存を停止できる（同時編集防止）

成功とは、  
「データを探す時間が減り、判断のための整理作業が不要になること」。

## 3. 利用者・利用シーン

### 利用者

- 小規模店舗オーナー（単一ユーザー想定）

### 利用シーン

- 商品仕入れ直後の登録
- 出品状況の管理
- 売却後の利益確認
- 月次の売上・利益確認

## 4. スコープ

### やること（MVP）

- スプレッドシート接続設定
- 商品一覧表示（検索・フィルタ・並び替え）
- 商品登録（Create）
- 商品編集（Update）
- アーカイブ（論理削除）
- ダッシュボード集計
- 外部更新検知

### やらないこと

- 複数ユーザー対応
- POS/EC/会計連携
- AIによる自動分析
- 高度な在庫最適化
- 画像管理の高度化

## 5. 機能要件

### データソース設定

- スプレッドシートURL/ID設定
- シート名指定
- 必須列チェック
- 接続テスト

### 商品一覧

- 検索（商品名/管理No/店舗名）
- フィルタ（出品/売却状態）
- 並び替え
- 詳細画面遷移

### 商品登録

- 必須項目入力
- 商品No自動採番
- シートへ新規行追加

### 商品編集

- 各項目更新
- 保存前外部更新チェック
- シート反映

### アーカイブ

- アーカイブフラグ更新
- 一覧除外/表示切替

### ダッシュボード

- 期間指定
- 売上・仕入・利益合計表示
- 販売先別集計

## 6. 非機能要件

- 数千件規模で実用的速度を保つ
- 主キー重複防止
- 入力バリデーション
- 外部更新検知による保存停止
- エラー時の原因表示
- API認証情報の安全管理
- 定期バックアップ運用可能

## 7. 制約条件

- データベースはGoogleスプレッドシートのみ
- スプレッドシート編集も許容する
- 同時編集は禁止
- 保存前に外部更新検知を行う
- 外部サービス連携は行わない（MVP）

## 8. 実装方針

- UI：Streamlit
- 言語：Python
- データ入出力：Google Sheets API + gspread
- 集計：pandas
- 可視化：Plotly
- 認証：サービスアカウント（MVP）
- 競合対策：更新印（revision）比較方式
- バージョン管理：Git / GitHub

## 9. 受け入れ条件

- 接続設定が正しく機能する
- 商品登録・編集がシートに反映される
- 外部更新時に保存が停止される
- 集計値がシート内容と一致する
- エラー時に原因が表示される
